from PIL import Image, ImageDraw

def draw_boxes(image_path, data, output_path):
    # 加载图片
    image = Image.open(image_path)
    draw = ImageDraw.Draw(image)

    # 定义颜色
    colors = {
        0: "blue",  # 类别0的颜色
        1: "red",   # 类别1的颜色
        # 可以根据需要添加更多类别及其颜色
    }

    # 处理数据并绘制方框
    for entry in data.splitlines():
        parts = entry.split(',')
        # 解析数据
        box_id = int(parts[0])
        image_id = int(parts[1])
        class_id = int(parts[2])
        x_min = float(parts[3])
        y_min = float(parts[4])
        width = float(parts[5])
        height = float(parts[6])

        # 计算右下角坐标
        x_max = x_min + width
        y_max = y_min + height
        
        # 绘制方框
        draw.rectangle([x_min, y_min, x_max, y_max], outline=colors.get(class_id, "green"), width=2)

    # 保存标注后的图片
    image.save(output_path)

# 示例数据
data = """2,10097,1,451.93695068359375,113.87760925292969,36.645538330078125,35.81169128417969
3,10097,0,346.24212646484375,281.01165771484375,32.853546142578125,32.478118896484375
4,10097,1,46.21710968017578,205.59922790527344,38.291778564453125,38.49676513671875
5,10097,0,343.2284240722656,321.42755126953125,29.065948486328125,29.185302734375
6,10097,1,43.007225036621094,299.927978515625,28.305770874023438,28.312255859375
7,10097,0,297.26129150390625,235.20372009277344,18.939300537109375,18.858078002929688
8,10097,0,116.64791107177734,438.31610107421875,27.31641387939453,27.272430419921875
9,10097,0,101.4336929321289,353.23004150390625,36.60761260986328,35.883941650390625
10,10097,1,85.43693542480469,274.6914978027344,26.039840698242188,26.263580322265625
11,10097,0,102.05854797363281,350.9646301269531,42.806976318359375,42.682037353515625
12,10097,0,135.67544555664062,285.8506774902344,43.090179443359375,42.841949462890625"""

# 调用函数
draw_boxes('datasets\mq\images\\val\\10097.png', data, 'output_image_out.jpg')
